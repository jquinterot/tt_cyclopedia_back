.............................................................F.......... [ 56%]
......F..F.F.F.F..FFF.F
=================================== FAILURES ===================================
___________ TestForumsRouter.test_create_forum_comment_reply_success ___________

self = <app.tests.test_forums.TestForumsRouter object at 0x114e3ab70>
client = <starlette.testclient.TestClient object at 0x11562e750>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsImV4cCI6MTc1MTM0MTUwOX0.VNvX8uXVH0253jv9mXDuAHEzzzczjoz1EUDfwcfL2mY'}
test_forum = <app.routers.forums.models.Forums object at 0x1156d87a0>
test_forum_comment = <app.routers.forums.models.ForumComment object at 0x11562f020>

    def test_create_forum_comment_reply_success(self, client, auth_headers, test_forum, test_forum_comment):
        """Test creating a reply to a forum comment"""
        reply_data = {
            "comment": "Reply to forum comment",
            "parent_id": test_forum_comment.id
        }
        response = client.post(f"/forums/{test_forum.id}/comments", json=reply_data, headers=auth_headers)
>       assert response.status_code == status.HTTP_201_CREATED
E       assert 422 == 201
E        +  where 422 = <Response [422 Unprocessable Entity]>.status_code
E        +  and   201 = status.HTTP_201_CREATED

app/tests/test_forums.py:318: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:08,941 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:08,941 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,941 INFO sqlalchemy.engine.Engine [cached since 21.06s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,942 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,942 INFO sqlalchemy.engine.Engine [cached since 21.06s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,943 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,943 INFO sqlalchemy.engine.Engine [cached since 21.06s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,943 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,943 INFO sqlalchemy.engine.Engine [cached since 21.06s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,944 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,944 INFO sqlalchemy.engine.Engine [cached since 21.06s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,944 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,944 INFO sqlalchemy.engine.Engine [cached since 21.06s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,945 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,945 INFO sqlalchemy.engine.Engine [cached since 21.07s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,945 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,946 INFO sqlalchemy.engine.Engine [cached since 21.07s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:08,946 INFO sqlalchemy.engine.Engine [cached since 21.07s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:08,947 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:08,947 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:08,947 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:08,948 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:08,948 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:08,948 INFO sqlalchemy.engine.Engine [cached since 21.05s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:08,949 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:08,949 INFO sqlalchemy.engine.Engine [cached since 20.75s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 8, 949027)}
2025-06-30 22:15:08,949 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:09,207 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:09,208 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:09,208 INFO sqlalchemy.engine.Engine [cached since 21.01s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$3mhXABzWFjkYi0jcsYF5t..c1aSZ649wGoCIuRhJQjr8.8z0ywnae', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 208088)}
2025-06-30 22:15:09,209 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:09,210 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:09,210 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:09,210 INFO sqlalchemy.engine.Engine [cached since 21.01s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:09,211 INFO sqlalchemy.engine.Engine INSERT INTO forums (id, title, content, likes, author, timestamp, updated_timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(likes)s, %(author)s, %(timestamp)s, %(updated_timestamp)s)
2025-06-30 22:15:09,211 INFO sqlalchemy.engine.Engine [cached since 10.86s ago] {'id': 'TgMXdgjqKGzfwJ4GUzExDu', 'title': 'Test Forum', 'content': 'Test forum content', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 211350), 'updated_timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 211352)}
2025-06-30 22:15:09,211 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:09,212 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:09,212 INFO sqlalchemy.engine.Engine SELECT forums.id, forums.title, forums.content, forums.likes, forums.author, forums.timestamp, forums.updated_timestamp 
FROM forums 
WHERE forums.id = %(pk_1)s
2025-06-30 22:15:09,212 INFO sqlalchemy.engine.Engine [cached since 10.86s ago] {'pk_1': 'TgMXdgjqKGzfwJ4GUzExDu'}
2025-06-30 22:15:09,213 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:09,213 INFO sqlalchemy.engine.Engine [cached since 20.16s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:09,214 INFO sqlalchemy.engine.Engine INSERT INTO forum_comments (id, comment, forum_id, user_id, parent_id, likes, username, timestamp) VALUES (%(id)s, %(comment)s, %(forum_id)s, %(user_id)s, %(parent_id)s, %(likes)s, %(username)s, %(timestamp)s)
2025-06-30 22:15:09,214 INFO sqlalchemy.engine.Engine [generated in 0.00008s] {'id': 'X3L4iDwQ7LEmdjqoDFkZKt', 'comment': 'Test forum comment', 'forum_id': 'TgMXdgjqKGzfwJ4GUzExDu', 'user_id': 'test-user-id-123', 'parent_id': None, 'likes': 0, 'username': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 214259)}
2025-06-30 22:15:09,215 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:09,216 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:09,217 INFO sqlalchemy.engine.Engine SELECT forum_comments.id, forum_comments.comment, forum_comments.forum_id, forum_comments.user_id, forum_comments.parent_id, forum_comments.likes, forum_comments.username, forum_comments.timestamp 
FROM forum_comments 
WHERE forum_comments.id = %(pk_1)s
2025-06-30 22:15:09,217 INFO sqlalchemy.engine.Engine [generated in 0.00006s] {'pk_1': 'X3L4iDwQ7LEmdjqoDFkZKt'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.06s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.06s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.06s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.06s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.06s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.06s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.07s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.07s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.07s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.05s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 20.75s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 8, 949027)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.01s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$3mhXABzWFjkYi0jcsYF5t..c1aSZ649wGoCIuRhJQjr8.8z0ywnae', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 208088)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.01s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO forums (id, title, content, likes, author, timestamp, updated_timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(likes)s, %(author)s, %(timestamp)s, %(updated_timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 10.86s ago] {'id': 'TgMXdgjqKGzfwJ4GUzExDu', 'title': 'Test Forum', 'content': 'Test forum content', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 211350), 'updated_timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 211352)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT forums.id, forums.title, forums.content, forums.likes, forums.author, forums.timestamp, forums.updated_timestamp 
FROM forums 
WHERE forums.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 10.86s ago] {'pk_1': 'TgMXdgjqKGzfwJ4GUzExDu'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 20.16s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO forum_comments (id, comment, forum_id, user_id, parent_id, likes, username, timestamp) VALUES (%(id)s, %(comment)s, %(forum_id)s, %(user_id)s, %(parent_id)s, %(likes)s, %(username)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [generated in 0.00008s] {'id': 'X3L4iDwQ7LEmdjqoDFkZKt', 'comment': 'Test forum comment', 'forum_id': 'TgMXdgjqKGzfwJ4GUzExDu', 'user_id': 'test-user-id-123', 'parent_id': None, 'likes': 0, 'username': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 9, 214259)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT forum_comments.id, forum_comments.comment, forum_comments.forum_id, forum_comments.user_id, forum_comments.parent_id, forum_comments.likes, forum_comments.username, forum_comments.timestamp 
FROM forum_comments 
WHERE forum_comments.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [generated in 0.00006s] {'pk_1': 'X3L4iDwQ7LEmdjqoDFkZKt'}
----------------------------- Captured stdout call -----------------------------
2025-06-30 22:15:09,218 INFO sqlalchemy.engine.Engine SELECT forums.id AS forums_id, forums.title AS forums_title, forums.content AS forums_content, forums.likes AS forums_likes, forums.author AS forums_author, forums.timestamp AS forums_timestamp, forums.updated_timestamp AS forums_updated_timestamp 
FROM forums 
WHERE forums.id = %(pk_1)s
2025-06-30 22:15:09,218 INFO sqlalchemy.engine.Engine [cached since 6.784s ago] {'pk_1': 'TgMXdgjqKGzfwJ4GUzExDu'}
2025-06-30 22:15:09,221 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:09,221 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:09,221 INFO sqlalchemy.engine.Engine [cached since 21.32s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:09,222 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT forums.id AS forums_id, forums.title AS forums_title, forums.content AS forums_content, forums.likes AS forums_likes, forums.author AS forums_author, forums.timestamp AS forums_timestamp, forums.updated_timestamp AS forums_updated_timestamp 
FROM forums 
WHERE forums.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 6.784s ago] {'pk_1': 'TgMXdgjqKGzfwJ4GUzExDu'}
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.32s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:09,257 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:09,257 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,258 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:09,258 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,258 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:09,258 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,259 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:09,259 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,259 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:09,259 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,259 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:09,259 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine [cached since 21.36s ago] {}
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine [cached since 21.35s ago] {}
2025-06-30 22:15:09,260 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.36s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 21.35s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
_________________ TestPostsRouter.test_get_posts_unauthorized __________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e7aae0>
client = <starlette.testclient.TestClient object at 0x11562f320>

    def test_get_posts_unauthorized(self, client):
        """Test getting posts without authentication"""
        response = client.get("/posts")
>       assert response.status_code == status.HTTP_401_UNAUTHORIZED
E       assert 403 == 401
E        +  where 403 = <Response [403 Forbidden]>.status_code
E        +  and   401 = status.HTTP_401_UNAUTHORIZED

app/tests/test_posts.py:104: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:13,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:13,277 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,277 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,278 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,278 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,279 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,279 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,279 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,279 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,280 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,280 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,280 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,280 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,281 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,281 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,281 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,281 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,282 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,282 INFO sqlalchemy.engine.Engine [cached since 25.4s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,282 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:13,282 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:13,282 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:13,283 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:13,283 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:13,283 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:13,284 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:13,284 INFO sqlalchemy.engine.Engine [cached since 25.09s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 13, 284012)}
2025-06-30 22:15:13,284 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.4s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.09s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 13, 284012)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:13,293 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:13,293 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:13,293 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,294 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:13,294 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,294 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:13,294 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,294 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:13,294 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,295 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:13,295 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,295 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:13,295 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,295 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:13,295 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,296 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:13,296 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,296 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:13,296 INFO sqlalchemy.engine.Engine [cached since 25.39s ago] {}
2025-06-30 22:15:13,296 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.39s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
_______________ TestPostsRouter.test_get_post_by_id_unauthorized _______________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e79fa0>
client = <starlette.testclient.TestClient object at 0x1157d12e0>
test_post = <app.routers.posts.models.Posts object at 0x1156722a0>

    def test_get_post_by_id_unauthorized(self, client, test_post):
        """Test getting post by ID without authentication"""
        response = client.get(f"/posts/{test_post.id}")
>       assert response.status_code == status.HTTP_401_UNAUTHORIZED
E       assert 403 == 401
E        +  where 403 = <Response [403 Forbidden]>.status_code
E        +  and   401 = status.HTTP_401_UNAUTHORIZED

app/tests/test_posts.py:128: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:13,866 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:13,867 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,867 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,868 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,868 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,869 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,869 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,870 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,870 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,870 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,870 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,871 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,871 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,871 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,871 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,872 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,872 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,872 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:13,872 INFO sqlalchemy.engine.Engine [cached since 25.99s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:13,873 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:13,873 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:13,873 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:13,874 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:13,874 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:13,874 INFO sqlalchemy.engine.Engine [cached since 25.98s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:13,875 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:13,875 INFO sqlalchemy.engine.Engine [cached since 25.68s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 13, 875313)}
2025-06-30 22:15:13,875 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:14,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,135 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:14,135 INFO sqlalchemy.engine.Engine [cached since 25.94s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$3nZgsnBx.Nbcan94ictOWu3SVbbE.wdpP/mnfqQlj/YC5ZrvicbZq', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 135364)}
2025-06-30 22:15:14,136 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:14,138 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,138 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:14,138 INFO sqlalchemy.engine.Engine [cached since 25.94s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:14,139 INFO sqlalchemy.engine.Engine INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
2025-06-30 22:15:14,140 INFO sqlalchemy.engine.Engine [cached since 0.879s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 139955)}
2025-06-30 22:15:14,140 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:14,141 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,141 INFO sqlalchemy.engine.Engine SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
2025-06-30 22:15:14,141 INFO sqlalchemy.engine.Engine [cached since 25.09s ago] {'pk_1': 'test-post-id-123'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.99s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.98s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.68s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 13, 875313)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.94s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$3nZgsnBx.Nbcan94ictOWu3SVbbE.wdpP/mnfqQlj/YC5ZrvicbZq', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 135364)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.94s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.879s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 139955)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 25.09s ago] {'pk_1': 'test-post-id-123'}
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:14,149 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:14,149 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,150 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:14,150 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,150 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:14,150 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,150 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:14,150 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,151 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:14,152 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,152 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:14,152 INFO sqlalchemy.engine.Engine [cached since 26.25s ago] {}
2025-06-30 22:15:14,152 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.25s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
________________ TestPostsRouter.test_create_post_unauthorized _________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e79b80>
client = <starlette.testclient.TestClient object at 0x1157b7470>

    def test_create_post_unauthorized(self, client):
        """Test creating post without authentication"""
        post_data = {
            "title": "Unauthorized Post",
            "content": "This should fail"
        }
        response = client.post("/posts", data=post_data)
>       assert response.status_code == status.HTTP_401_UNAUTHORIZED
E       assert 403 == 401
E        +  where 403 = <Response [403 Forbidden]>.status_code
E        +  and   401 = status.HTTP_401_UNAUTHORIZED

app/tests/test_posts.py:149: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:14,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,446 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,446 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,447 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,447 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,448 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,448 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,448 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,448 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,449 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,449 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,449 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,449 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,450 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,450 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,450 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,450 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,451 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,451 INFO sqlalchemy.engine.Engine [cached since 26.57s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,451 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:14,451 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:14,451 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:14,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,452 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:14,452 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:14,453 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:14,453 INFO sqlalchemy.engine.Engine [cached since 26.26s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 453176)}
2025-06-30 22:15:14,453 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.57s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.26s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 453176)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:14,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,462 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:14,462 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,463 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:14,463 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,463 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:14,463 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,463 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:14,463 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:14,464 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,465 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:14,465 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {}
2025-06-30 22:15:14,465 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
___________________ TestPostsRouter.test_delete_post_success ___________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e797c0>
client = <starlette.testclient.TestClient object at 0x115654e90>

    def test_delete_post_success(self, client):
>       headers, post_id = self.setup_user_and_post(client)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

app/tests/test_posts.py:161: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <app.tests.test_posts.TestPostsRouter object at 0x114e797c0>
client = <starlette.testclient.TestClient object at 0x115654e90>

    def setup_user_and_post(self, client):
        user_data = {"username": "testuser", "email": "test@example.com", "password": "testpassword"}
        client.post("/users", json=user_data)
        login = client.post("/users/login", json={"username": "testuser", "password": "testpassword"})
        token = login.json()["access_token"]
        headers = {"Authorization": f"Bearer {token}"}
        post_data = {"title": "Test Post", "content": "Test content", "image_url": "/static/default/default.jpeg"}
        post_resp = client.post("/posts", json=post_data, headers=headers)
>       post_id = post_resp.json()["id"]
                  ^^^^^^^^^^^^^^^^^^^^^^
E       KeyError: 'id'

app/tests/test_posts.py:66: KeyError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:14,749 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,749 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,749 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,750 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,750 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,750 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,750 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,751 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,751 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,751 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,751 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,751 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,751 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,752 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,752 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,752 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,752 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,753 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:14,753 INFO sqlalchemy.engine.Engine [cached since 26.87s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:14,753 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:14,753 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:14,753 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:14,754 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,754 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:14,754 INFO sqlalchemy.engine.Engine [cached since 26.86s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:14,755 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:14,755 INFO sqlalchemy.engine.Engine [cached since 26.56s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 755341)}
2025-06-30 22:15:14,755 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.87s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.86s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.56s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 14, 755341)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
----------------------------- Captured stdout call -----------------------------
2025-06-30 22:15:14,759 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:14,759 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:14,759 INFO sqlalchemy.engine.Engine [cached since 26.86s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:14,759 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:14,760 INFO sqlalchemy.engine.Engine [cached since 26.26s ago] {'email_1': 'test@example.com', 'param_1': 1}
2025-06-30 22:15:15,017 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:15,017 INFO sqlalchemy.engine.Engine [cached since 26.82s ago] {'id': 'JhBWRNxUsjQLRTYGqQaE95', 'username': 'testuser', 'password': '$2b$12$tpxsT7g7R1QGAfhzsvK18OfnhS0M.OiWtFhGknCatHgA8kL3S9MDO', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 17619)}
2025-06-30 22:15:15,019 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:15,022 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,022 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:15,022 INFO sqlalchemy.engine.Engine [cached since 26.82s ago] {'pk_1': 'JhBWRNxUsjQLRTYGqQaE95'}
2025-06-30 22:15:15,023 INFO sqlalchemy.engine.Engine ROLLBACK
2025-06-30 22:15:15,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,026 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:15,026 INFO sqlalchemy.engine.Engine [cached since 27.13s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:15,284 INFO sqlalchemy.engine.Engine ROLLBACK
2025-06-30 22:15:15,288 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,288 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:15,288 INFO sqlalchemy.engine.Engine [cached since 27.39s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:15,290 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.86s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.26s ago] {'email_1': 'test@example.com', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.82s ago] {'id': 'JhBWRNxUsjQLRTYGqQaE95', 'username': 'testuser', 'password': '$2b$12$tpxsT7g7R1QGAfhzsvK18OfnhS0M.OiWtFhGknCatHgA8kL3S9MDO', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 17619)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.82s ago] {'pk_1': 'JhBWRNxUsjQLRTYGqQaE95'}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.13s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.39s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:15,297 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,297 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:15,297 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,298 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:15,298 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,298 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:15,302 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,302 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:15,302 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,302 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:15,302 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,303 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:15,303 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,303 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:15,303 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,303 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:15,303 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,304 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:15,304 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {}
2025-06-30 22:15:15,304 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
________________ TestPostsRouter.test_delete_post_unauthorized _________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e79100>
client = <starlette.testclient.TestClient object at 0x1156b5b80>
test_post = <app.routers.posts.models.Posts object at 0x115727560>

    def test_delete_post_unauthorized(self, client, test_post):
        """Test deleting post without authentication"""
        response = client.delete(f"/posts/{test_post.id}")
>       assert response.status_code == status.HTTP_401_UNAUTHORIZED
E       assert 403 == 401
E        +  where 403 = <Response [403 Forbidden]>.status_code
E        +  and   401 = status.HTTP_401_UNAUTHORIZED

app/tests/test_posts.py:179: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:15,588 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,589 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,590 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,591 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,591 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,591 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,592 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,593 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,593 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,594 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,594 INFO sqlalchemy.engine.Engine [cached since 27.71s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,595 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:15,595 INFO sqlalchemy.engine.Engine [cached since 27.72s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:15,596 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:15,596 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:15,596 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:15,597 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,597 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:15,597 INFO sqlalchemy.engine.Engine [cached since 27.7s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:15,598 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:15,598 INFO sqlalchemy.engine.Engine [cached since 27.4s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 598071)}
2025-06-30 22:15:15,598 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:15,858 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,858 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:15,858 INFO sqlalchemy.engine.Engine [cached since 27.66s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$H3yceAYr9VLFhorqNI6/DeRuomDox8.s8uBrRcClmHqqE6x4J2MjS', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 858668)}
2025-06-30 22:15:15,859 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:15,861 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,861 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:15,861 INFO sqlalchemy.engine.Engine [cached since 27.66s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:15,862 INFO sqlalchemy.engine.Engine INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
2025-06-30 22:15:15,862 INFO sqlalchemy.engine.Engine [cached since 2.601s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 862422)}
2025-06-30 22:15:15,862 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:15,863 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:15,863 INFO sqlalchemy.engine.Engine SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
2025-06-30 22:15:15,863 INFO sqlalchemy.engine.Engine [cached since 26.82s ago] {'pk_1': 'test-post-id-123'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.71s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.72s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.7s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.4s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 598071)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.66s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$H3yceAYr9VLFhorqNI6/DeRuomDox8.s8uBrRcClmHqqE6x4J2MjS', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 858668)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.66s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 2.601s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 15, 862422)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 26.82s ago] {'pk_1': 'test-post-id-123'}
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:15,871 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:15,871 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,872 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:15,872 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,872 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:15,872 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,873 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:15,873 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,873 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:15,873 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,874 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:15,874 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,874 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:15,874 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,875 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:15,875 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,875 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:15,875 INFO sqlalchemy.engine.Engine [cached since 27.97s ago] {}
2025-06-30 22:15:15,876 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.97s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
_________________ TestPostsRouter.test_like_post_already_liked _________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e79730>
client = <starlette.testclient.TestClient object at 0x1156b7fb0>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsImV4cCI6MTc1MTM0MTUxNn0.zMvedhWCW3Ka28WSUex0zOE8E1Y0yDmUCLpYroKHYkU'}
test_post = <app.routers.posts.models.Posts object at 0x1157f3710>

    def test_like_post_already_liked(self, client, auth_headers, test_post):
        """Test liking a post that's already liked (should toggle)"""
        # First like
        response1 = client.post(f"/posts/{test_post.id}/like", headers=auth_headers)
        assert response1.status_code == status.HTTP_204_NO_CONTENT
    
        # Second like (should unlike)
        response2 = client.post(f"/posts/{test_post.id}/like", headers=auth_headers)
>       assert response2.status_code == status.HTTP_204_NO_CONTENT
E       assert 400 == 204
E        +  where 400 = <Response [400 Bad Request]>.status_code
E        +  and   204 = status.HTTP_204_NO_CONTENT

app/tests/test_posts.py:207: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:16,727 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:16,727 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,727 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,728 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,728 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,729 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,729 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,729 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,729 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,730 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,730 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,731 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,731 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,731 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,731 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,732 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,732 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,733 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:16,733 INFO sqlalchemy.engine.Engine [cached since 28.85s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:16,733 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:16,733 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:16,733 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:16,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:16,734 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:16,734 INFO sqlalchemy.engine.Engine [cached since 28.84s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:16,735 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:16,735 INFO sqlalchemy.engine.Engine [cached since 28.54s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 16, 735100)}
2025-06-30 22:15:16,735 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:16,994 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:16,994 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:16,994 INFO sqlalchemy.engine.Engine [cached since 28.8s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$0SjzzVESMZ6oMw2XfSmP1.F7qWR7IrzeeDChAhodGN7tXukiyB.ma', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 16, 994848)}
2025-06-30 22:15:16,995 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:16,998 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:16,998 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:16,998 INFO sqlalchemy.engine.Engine [cached since 28.8s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:16,999 INFO sqlalchemy.engine.Engine INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
2025-06-30 22:15:16,999 INFO sqlalchemy.engine.Engine [cached since 3.739s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 16, 999630)}
2025-06-30 22:15:17,000 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,006 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,006 INFO sqlalchemy.engine.Engine SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
2025-06-30 22:15:17,006 INFO sqlalchemy.engine.Engine [cached since 27.96s ago] {'pk_1': 'test-post-id-123'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.85s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.84s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.54s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 16, 735100)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.8s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$0SjzzVESMZ6oMw2XfSmP1.F7qWR7IrzeeDChAhodGN7tXukiyB.ma', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 16, 994848)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.8s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 3.739s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 16, 999630)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 27.96s ago] {'pk_1': 'test-post-id-123'}
----------------------------- Captured stdout call -----------------------------
2025-06-30 22:15:17,010 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,010 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,010 INFO sqlalchemy.engine.Engine [cached since 29.11s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:17,011 INFO sqlalchemy.engine.Engine SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,011 INFO sqlalchemy.engine.Engine [cached since 0.304s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'test-post-id-123', 'param_1': 1}
2025-06-30 22:15:17,011 INFO sqlalchemy.engine.Engine INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id
2025-06-30 22:15:17,012 INFO sqlalchemy.engine.Engine [cached since 0.3035s ago] {'user_id': 'test-user-id-123', 'post_id': 'test-post-id-123', 'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 11989)}
2025-06-30 22:15:17,013 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,015 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,015 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:17,016 INFO sqlalchemy.engine.Engine SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,016 INFO sqlalchemy.engine.Engine [cached since 0.3092s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'test-post-id-123', 'param_1': 1}
2025-06-30 22:15:17,017 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.11s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.304s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'test-post-id-123', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.3035s ago] {'user_id': 'test-user-id-123', 'post_id': 'test-post-id-123', 'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 11989)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.3092s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'test-post-id-123', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:17,022 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:17,022 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,023 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:17,023 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,023 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:17,023 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,023 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:17,023 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:17,024 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,025 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:17,025 INFO sqlalchemy.engine.Engine [cached since 29.12s ago] {}
2025-06-30 22:15:17,025 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.12s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
___________________ TestPostsRouter.test_like_post_not_found ___________________

self = <sqlalchemy.engine.base.Connection object at 0x1157e2ab0>
dialect = <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x113816390>
context = <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x1157e2120>
statement = <sqlalchemy.dialects.postgresql.base.PGCompiler object at 0x1157f2d20>
parameters = [{'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 301667), 'post_id': 'fake-post-id', 'user_id': 'test-user-id-123'}]

    def _exec_single_context(
        self,
        dialect: Dialect,
        context: ExecutionContext,
        statement: Union[str, Compiled],
        parameters: Optional[_AnyMultiExecuteParams],
    ) -> CursorResult[Any]:
        """continue the _execute_context() method for a single DBAPI
        cursor.execute() or cursor.executemany() call.
    
        """
        if dialect.bind_typing is BindTyping.SETINPUTSIZES:
            generic_setinputsizes = context._prepare_set_input_sizes()
    
            if generic_setinputsizes:
                try:
                    dialect.do_set_input_sizes(
                        context.cursor, generic_setinputsizes, context
                    )
                except BaseException as e:
                    self._handle_dbapi_exception(
                        e, str(statement), parameters, None, context
                    )
    
        cursor, str_statement, parameters = (
            context.cursor,
            context.statement,
            context.parameters,
        )
    
        effective_parameters: Optional[_AnyExecuteParams]
    
        if not context.executemany:
            effective_parameters = parameters[0]
        else:
            effective_parameters = parameters
    
        if self._has_events or self.engine._has_events:
            for fn in self.dispatch.before_cursor_execute:
                str_statement, effective_parameters = fn(
                    self,
                    cursor,
                    str_statement,
                    effective_parameters,
                    context,
                    context.executemany,
                )
    
        if self._echo:
            self._log_info(str_statement)
    
            stats = context._get_cache_stats()
    
            if not self.engine.hide_parameters:
                self._log_info(
                    "[%s] %r",
                    stats,
                    sql_util._repr_params(
                        effective_parameters,
                        batches=10,
                        ismulti=context.executemany,
                    ),
                )
            else:
                self._log_info(
                    "[%s] [SQL parameters hidden due to hide_parameters=True]",
                    stats,
                )
    
        evt_handled: bool = False
        try:
            if context.execute_style is ExecuteStyle.EXECUTEMANY:
                effective_parameters = cast(
                    "_CoreMultiExecuteParams", effective_parameters
                )
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_executemany:
                        if fn(
                            cursor,
                            str_statement,
                            effective_parameters,
                            context,
                        ):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_executemany(
                        cursor,
                        str_statement,
                        effective_parameters,
                        context,
                    )
            elif not effective_parameters and context.no_parameters:
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_execute_no_params:
                        if fn(cursor, str_statement, context):
                            evt_handled = True
                            break
                if not evt_handled:
                    self.dialect.do_execute_no_params(
                        cursor, str_statement, context
                    )
            else:
                effective_parameters = cast(
                    "_CoreSingleExecuteParams", effective_parameters
                )
                if self.dialect._has_events:
                    for fn in self.dialect.dispatch.do_execute:
                        if fn(
                            cursor,
                            str_statement,
                            effective_parameters,
                            context,
                        ):
                            evt_handled = True
                            break
                if not evt_handled:
>                   self.dialect.do_execute(
                        cursor, str_statement, effective_parameters, context
                    )

/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x113816390>
cursor = <cursor object at 0x115790d60; closed: -1>
statement = 'INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id'
parameters = {'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 301667), 'post_id': 'fake-post-id', 'user_id': 'test-user-id-123'}
context = <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x1157e2120>

    def do_execute(self, cursor, statement, parameters, context=None):
>       cursor.execute(statement, parameters)
E       psycopg2.errors.ForeignKeyViolation: insert or update on table "post_likes" violates foreign key constraint "post_likes_post_id_fkey"
E       DETAIL:  Key (post_id)=(fake-post-id) is not present in table "posts".

/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: ForeignKeyViolation

The above exception was the direct cause of the following exception:

self = <app.tests.test_posts.TestPostsRouter object at 0x114e7a690>
client = <starlette.testclient.TestClient object at 0x1157f1130>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsImV4cCI6MTc1MTM0MTUxN30.wQIvD3g219BCzpgAQr71FzuWa3qPF6Jnd_1-PfwXsiw'}

    def test_like_post_not_found(self, client, auth_headers):
        """Test liking a post that doesn't exist"""
        fake_id = "fake-post-id"
>       response = client.post(f"/posts/{fake_id}/like", headers=auth_headers)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

app/tests/test_posts.py:219: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/testclient.py:633: in post
    return super().post(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/httpx/_client.py:1144: in post
    return self.request(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/testclient.py:516: in request
    return super().request(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/httpx/_client.py:914: in send
    response = self._send_handling_auth(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/httpx/_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/httpx/_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/httpx/_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/testclient.py:398: in handle_request
    raise exc
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/testclient.py:395: in handle_request
    portal.call(self.app, scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py:290: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py:221: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py:189: in __call__
    with collapse_excgroups():
         ^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py:93: in collapse_excgroups
    raise exc
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/middleware/log_to_mongo.py:18: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py:85: in __call__
    await self.app(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py:65: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py:64: in wrapped_app
    raise exc
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    await app(scope, receive, sender)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py:756: in __call__
    await self.middleware_stack(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py:776: in app
    await route.handle(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py:297: in handle
    await self.app(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py:77: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py:64: in wrapped_app
    raise exc
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    await app(scope, receive, sender)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py:72: in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py:278: in app
    raw_response = await run_endpoint_function(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py:193: in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py:42: in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py:56: in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py:2470: in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py:967: in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
app/routers/posts/posts.py:257: in like_post
    db.commit()
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2032: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4345: in flush
    self._flush(objects)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4480: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4441: in _flush
    flush_context.execute()
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1415: in execute
    return meth(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:523: in _execute_on_connection
    return connection._execute_clauseelement(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1637: in _execute_clauseelement
    ret = self._execute_context(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1842: in _execute_context
    return self._exec_single_context(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1982: in _exec_single_context
    self._handle_dbapi_exception(
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2351: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1963: in _exec_single_context
    self.dialect.do_execute(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x113816390>
cursor = <cursor object at 0x115790d60; closed: -1>
statement = 'INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id'
parameters = {'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 301667), 'post_id': 'fake-post-id', 'user_id': 'test-user-id-123'}
context = <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x1157e2120>

    def do_execute(self, cursor, statement, parameters, context=None):
>       cursor.execute(statement, parameters)
E       sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "post_likes" violates foreign key constraint "post_likes_post_id_fkey"
E       DETAIL:  Key (post_id)=(fake-post-id) is not present in table "posts".
E       
E       [SQL: INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id]
E       [parameters: {'user_id': 'test-user-id-123', 'post_id': 'fake-post-id', 'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 301667)}]
E       (Background on this error at: https://sqlalche.me/e/20/gkpj)

/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py:943: IntegrityError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:17,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,027 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,027 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,027 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,027 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,028 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,028 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,028 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,028 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,029 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,029 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,029 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,029 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,030 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,030 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,030 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,030 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,031 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,031 INFO sqlalchemy.engine.Engine [cached since 29.15s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,031 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:17,031 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:17,032 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,032 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,032 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,032 INFO sqlalchemy.engine.Engine [cached since 29.14s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:17,033 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:17,033 INFO sqlalchemy.engine.Engine [cached since 28.84s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 33277)}
2025-06-30 22:15:17,033 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:17,292 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,292 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:17,292 INFO sqlalchemy.engine.Engine [cached since 29.1s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$x8cXddLfOuLrJ6726yYFR.ADa9nrSPpA3XkvnaSzpZQXnkH1HzGbG', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 292636)}
2025-06-30 22:15:17,293 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,295 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,295 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:17,295 INFO sqlalchemy.engine.Engine [cached since 29.09s ago] {'pk_1': 'test-user-id-123'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.15s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.14s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.84s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 33277)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.1s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$x8cXddLfOuLrJ6726yYFR.ADa9nrSPpA3XkvnaSzpZQXnkH1HzGbG', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 292636)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.09s ago] {'pk_1': 'test-user-id-123'}
----------------------------- Captured stdout call -----------------------------
2025-06-30 22:15:17,299 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,299 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,300 INFO sqlalchemy.engine.Engine [cached since 29.4s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:17,301 INFO sqlalchemy.engine.Engine SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,301 INFO sqlalchemy.engine.Engine [cached since 0.5937s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'fake-post-id', 'param_1': 1}
2025-06-30 22:15:17,301 INFO sqlalchemy.engine.Engine INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id
2025-06-30 22:15:17,301 INFO sqlalchemy.engine.Engine [cached since 0.5932s ago] {'user_id': 'test-user-id-123', 'post_id': 'fake-post-id', 'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 301667)}
2025-06-30 22:15:17,303 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.4s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.5937s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'fake-post-id', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO post_likes (user_id, post_id, created_at) VALUES (%(user_id)s, %(post_id)s, %(created_at)s) RETURNING post_likes.id
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.5932s ago] {'user_id': 'test-user-id-123', 'post_id': 'fake-post-id', 'created_at': datetime.datetime(2025, 7, 1, 3, 15, 17, 301667)}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:17,644 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:17,644 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:17,645 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,646 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:17,646 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,646 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:17,646 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,648 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:17,648 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,648 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:17,648 INFO sqlalchemy.engine.Engine [cached since 29.74s ago] {}
2025-06-30 22:15:17,648 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.74s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
_________________ TestPostsRouter.test_like_post_unauthorized __________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e7b3b0>
client = <starlette.testclient.TestClient object at 0x115727950>
test_post = <app.routers.posts.models.Posts object at 0x1157f30b0>

    def test_like_post_unauthorized(self, client, test_post):
        """Test liking post without authentication"""
        response = client.post(f"/posts/{test_post.id}/like")
>       assert response.status_code == status.HTTP_401_UNAUTHORIZED
E       assert 403 == 401
E        +  where 403 = <Response [403 Forbidden]>.status_code
E        +  and   401 = status.HTTP_401_UNAUTHORIZED

app/tests/test_posts.py:225: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:17,650 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,650 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,651 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,652 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,652 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,652 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,653 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,653 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,653 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:17,654 INFO sqlalchemy.engine.Engine [cached since 29.77s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:17,654 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:17,654 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:17,654 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,655 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,655 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:17,655 INFO sqlalchemy.engine.Engine [cached since 29.76s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:17,656 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:17,656 INFO sqlalchemy.engine.Engine [cached since 29.46s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 656487)}
2025-06-30 22:15:17,657 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:17,918 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,918 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:17,918 INFO sqlalchemy.engine.Engine [cached since 29.72s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$cNvD6Sr92AdnTu.ryOY5guxuWPj6RMjSLCiRyFkvxKr7ZyeErpnF6', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 918337)}
2025-06-30 22:15:17,918 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,919 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,920 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:17,920 INFO sqlalchemy.engine.Engine [cached since 29.72s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:17,920 INFO sqlalchemy.engine.Engine INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
2025-06-30 22:15:17,920 INFO sqlalchemy.engine.Engine [cached since 4.66s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 920695)}
2025-06-30 22:15:17,920 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:17,921 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:17,921 INFO sqlalchemy.engine.Engine SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
2025-06-30 22:15:17,921 INFO sqlalchemy.engine.Engine [cached since 28.87s ago] {'pk_1': 'test-post-id-123'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.77s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.76s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.46s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 656487)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.72s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$cNvD6Sr92AdnTu.ryOY5guxuWPj6RMjSLCiRyFkvxKr7ZyeErpnF6', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 918337)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.72s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 4.66s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 17, 920695)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 28.87s ago] {'pk_1': 'test-post-id-123'}
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:17,929 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:17,929 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:17,930 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,931 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:17,931 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,931 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:17,931 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,931 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:17,931 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,932 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:17,932 INFO sqlalchemy.engine.Engine [cached since 30.03s ago] {}
2025-06-30 22:15:17,932 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.03s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
__________________ TestPostsRouter.test_unlike_post_not_liked __________________

self = <app.tests.test_posts.TestPostsRouter object at 0x114e78950>
client = <starlette.testclient.TestClient object at 0x1157d3ec0>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsImV4cCI6MTc1MTM0MTUxOH0.L8_0FMzewxkhOk8CZyzfDI9SPRLanLS5mbMnXdrmZw0'}
test_post = <app.routers.posts.models.Posts object at 0x120054230>

    def test_unlike_post_not_liked(self, client, auth_headers, test_post):
        """Test unliking a post that's not liked"""
        response = client.delete(f"/posts/{test_post.id}/like", headers=auth_headers)
>       assert response.status_code == status.HTTP_204_NO_CONTENT
E       assert 400 == 204
E        +  where 400 = <Response [400 Bad Request]>.status_code
E        +  and   204 = status.HTTP_204_NO_CONTENT

app/tests/test_posts.py:246: AssertionError
---------------------------- Captured stdout setup -----------------------------
2025-06-30 22:15:18,226 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:18,226 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,226 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,227 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,228 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,228 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,229 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,229 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,229 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,230 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,230 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,230 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,230 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,230 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,231 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-06-30 22:15:18,231 INFO sqlalchemy.engine.Engine [cached since 30.35s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-06-30 22:15:18,231 INFO sqlalchemy.engine.Engine CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
2025-06-30 22:15:18,231 INFO sqlalchemy.engine.Engine [no key 0.00004s] {}
2025-06-30 22:15:18,231 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:18,232 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:18,232 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:18,232 INFO sqlalchemy.engine.Engine [cached since 30.34s ago] {'username_1': 'admin', 'param_1': 1}
2025-06-30 22:15:18,233 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:18,233 INFO sqlalchemy.engine.Engine [cached since 30.04s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 18, 233033)}
2025-06-30 22:15:18,233 INFO sqlalchemy.engine.Engine COMMIT
✔ Admin user seeded
2025-06-30 22:15:18,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:18,493 INFO sqlalchemy.engine.Engine INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
2025-06-30 22:15:18,493 INFO sqlalchemy.engine.Engine [cached since 30.3s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$no2l7v1wqkk1SVyNp3hhpOzMgVkWqmE.DzN.D5XjF/FKxr0qOdDnW', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 18, 493657)}
2025-06-30 22:15:18,495 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:18,496 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:18,496 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
2025-06-30 22:15:18,496 INFO sqlalchemy.engine.Engine [cached since 30.3s ago] {'pk_1': 'test-user-id-123'}
2025-06-30 22:15:18,497 INFO sqlalchemy.engine.Engine INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
2025-06-30 22:15:18,497 INFO sqlalchemy.engine.Engine [cached since 5.237s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 18, 497655)}
2025-06-30 22:15:18,498 INFO sqlalchemy.engine.Engine COMMIT
2025-06-30 22:15:18,498 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:18,498 INFO sqlalchemy.engine.Engine SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
2025-06-30 22:15:18,498 INFO sqlalchemy.engine.Engine [cached since 29.45s ago] {'pk_1': 'test-post-id-123'}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'post_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'posts', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'forums', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'forum_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'forum_comments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.35s ago] {'table_name': 'forum_comment_likes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
INFO     sqlalchemy.engine.Engine:base.py:1842 CREATE SCHEMA IF NOT EXISTS cyclopedia_owner
INFO     sqlalchemy.engine.Engine:base.py:1842 [no key 0.00004s] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.34s ago] {'username_1': 'admin', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.04s ago] {'id': 'default_admin_id', 'username': 'admin', 'password': 'admin', 'email': 'admin@email.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 18, 233033)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO users (id, username, password, email, timestamp) VALUES (%(id)s, %(username)s, %(password)s, %(email)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.3s ago] {'id': 'test-user-id-123', 'username': 'testuser', 'password': '$2b$12$no2l7v1wqkk1SVyNp3hhpOzMgVkWqmE.DzN.D5XjF/FKxr0qOdDnW', 'email': 'test@example.com', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 18, 493657)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id, users.username, users.password, users.email, users.timestamp 
FROM users 
WHERE users.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.3s ago] {'pk_1': 'test-user-id-123'}
INFO     sqlalchemy.engine.Engine:base.py:1842 INSERT INTO posts (id, title, content, image_url, likes, author, timestamp) VALUES (%(id)s, %(title)s, %(content)s, %(image_url)s, %(likes)s, %(author)s, %(timestamp)s)
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 5.237s ago] {'id': 'test-post-id-123', 'title': 'Test Post', 'content': 'Test content', 'image_url': '/static/default/default.jpeg', 'likes': 0, 'author': 'testuser', 'timestamp': datetime.datetime(2025, 7, 1, 3, 15, 18, 497655)}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT posts.id, posts.title, posts.content, posts.image_url, posts.likes, posts.author, posts.timestamp, posts.stats 
FROM posts 
WHERE posts.id = %(pk_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 29.45s ago] {'pk_1': 'test-post-id-123'}
----------------------------- Captured stdout call -----------------------------
2025-06-30 22:15:18,502 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-06-30 22:15:18,502 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:18,502 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {'username_1': 'testuser', 'param_1': 1}
2025-06-30 22:15:18,503 INFO sqlalchemy.engine.Engine SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
2025-06-30 22:15:18,503 INFO sqlalchemy.engine.Engine [cached since 1.796s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'test-post-id-123', 'param_1': 1}
2025-06-30 22:15:18,503 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT users.id AS users_id, users.username AS users_username, users.password AS users_password, users.email AS users_email, users.timestamp AS users_timestamp 
FROM users 
WHERE users.username = %(username_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {'username_1': 'testuser', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:1842 SELECT post_likes.id AS post_likes_id, post_likes.user_id AS post_likes_user_id, post_likes.post_id AS post_likes_post_id, post_likes.created_at AS post_likes_created_at 
FROM post_likes 
WHERE post_likes.user_id = %(user_id_1)s AND post_likes.post_id = %(post_id_1)s 
 LIMIT %(param_1)s
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 1.796s ago] {'user_id_1': 'test-user-id-123', 'post_id_1': 'test-post-id-123', 'param_1': 1}
INFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK
--------------------------- Captured stdout teardown ---------------------------
2025-06-30 22:15:18,508 INFO sqlalchemy.engine.Engine DELETE FROM forum_comment_likes
2025-06-30 22:15:18,508 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,509 INFO sqlalchemy.engine.Engine DELETE FROM comment_likes
2025-06-30 22:15:18,509 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,509 INFO sqlalchemy.engine.Engine DELETE FROM post_likes
2025-06-30 22:15:18,509 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,509 INFO sqlalchemy.engine.Engine DELETE FROM forum_likes
2025-06-30 22:15:18,509 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,510 INFO sqlalchemy.engine.Engine DELETE FROM forum_comments
2025-06-30 22:15:18,510 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,510 INFO sqlalchemy.engine.Engine DELETE FROM comments
2025-06-30 22:15:18,510 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,510 INFO sqlalchemy.engine.Engine DELETE FROM users
2025-06-30 22:15:18,510 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,511 INFO sqlalchemy.engine.Engine DELETE FROM posts
2025-06-30 22:15:18,511 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,511 INFO sqlalchemy.engine.Engine DELETE FROM forums
2025-06-30 22:15:18,511 INFO sqlalchemy.engine.Engine [cached since 30.61s ago] {}
2025-06-30 22:15:18,512 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comment_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM post_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_likes
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forum_comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM comments
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM users
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM posts
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:1842 DELETE FROM forums
INFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 30.61s ago] {}
INFO     sqlalchemy.engine.Engine:base.py:2704 COMMIT
=========================== short test summary info ============================
FAILED app/tests/test_forums.py::TestForumsRouter::test_create_forum_comment_reply_success
FAILED app/tests/test_posts.py::TestPostsRouter::test_get_posts_unauthorized
FAILED app/tests/test_posts.py::TestPostsRouter::test_get_post_by_id_unauthorized
FAILED app/tests/test_posts.py::TestPostsRouter::test_create_post_unauthorized
FAILED app/tests/test_posts.py::TestPostsRouter::test_delete_post_success - K...
FAILED app/tests/test_posts.py::TestPostsRouter::test_delete_post_unauthorized
FAILED app/tests/test_posts.py::TestPostsRouter::test_like_post_already_liked
FAILED app/tests/test_posts.py::TestPostsRouter::test_like_post_not_found - s...
FAILED app/tests/test_posts.py::TestPostsRouter::test_like_post_unauthorized
FAILED app/tests/test_posts.py::TestPostsRouter::test_unlike_post_not_liked
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 10 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
10 failed, 85 passed, 555 warnings in 31.30s
